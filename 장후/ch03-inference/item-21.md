# Item 21. 타입 넓히기

* 변수는 타입스크립트의 정적 분석 시점에, 가능한 값들의 타입의 집합을 가진다.
    * 변수 할당 시 타입을 명시하지 않으면 타입을 추론한다.
    * 지정된 값을 가지고 할당 가능한 값들의 집합을 유추한 뒤 추론하는 과정을 `타입 넓히기(widemomg)` 이라고 부른다.

## 타입 넓히기 예시
```ts
interface Vector3 { x: number; y: number; z: number; };

function getComponent(vector: Vector3, axis: 'x' | 'y' | 'z') {
    return vector[axis];
};

let x = 'x'; // type string
let vec = { x: 10, y: 20, z: 30 };

getComponent(vec, x); // error
```

* getComponent의 두 번쩨 매개변수에는 `'x' | 'y' | 'z'` 타입을 기대했지만, 타입 넓히기가 적용된 변수 x의 타입은 `string` 이므로, error 발생

## 타입 넓히기 과정
```ts
const mixed = [1, '2'] // (string | number)[]
```

* 가능한 타입의 경우의 수가 다양하다.
* 타입스크립트는 타입을 추론할 때, 작성자의 의도를 파악하며, 명확성과 유연성의 균형을 유지하려고 한다.
    * 예를 들어 let에 다양한 변수가 재할당 되는 경우, 타입을 일관성있게 유지하기 위한 추론을 한다.
* 하지만, 추론 과정이 명확하지 않을 뿐더러 항상 원하는 타입이 추론되는 것은 아니므로, 타입 넓히기를 제어하는 것이 좋다.

### 타입 넓히기 제어
1. let보다는 const 사용
    * 더 좁은 타입으로 추론한다.
    * 하지만 일반적인 값을 제외하고 배열, 튜플, 객체 등을 추론할 때는 명확하게 추론하지 못한다.
    * 일반적으로 변수를 let에 할당한 것 처럼 추론한다.

2. 명시적 타입을 제공
```ts
const v: { x: 1|3|5; } = { x: 1 };
```

3. 함수 매개변수 값 등 타입 체커에 추가적인 문맥을 제공한다.

3. const 단언문 `as const` 사용
    * `as const` 를 사용하면 타입스크립트는 최대한 좁게 타입을 추론한다.
    
